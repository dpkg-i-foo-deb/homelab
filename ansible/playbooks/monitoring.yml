- name: Configure monitoring virtual machine
  hosts: monitoring
  vars:
    monitoring_user: monitoring
  tasks:
    - name: Deploy Prometheus
      ansible.builtin.import_role:
        name: prometheus
      vars:
        prometheus_user: '{{ monitoring_user }}'
        prometheus_container: 'prometheus'
        prometheus_config_dir: '/var/prometheus'
        prometheus_metrics_dir: '/metrics/prometheus'
        prometheus_scrape_jobs:
          - job_name: 'node_exporter'
            targets:
              - 'localhost:9100'
              - '192.168.1.100:9100'
              - 'server.example.com:9100'

          - job_name: 'prometheus'
            targets:
              - 'localhost:9090'
