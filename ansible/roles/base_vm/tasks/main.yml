---
- name: Install packages
  ansible.builtin.import_tasks: packages.yml

- name: Podman configuration
  ansible.builtin.import_role:
    name: podman

- name: Login to homelab registry
  ansible.builtin.import_role:
    name: podman
    tasks_from: login
  vars:
    podman_login_registry: '{{ registry_host }}.{{ internet_host }}'
    podman_login_user: '{{ homelab_registry_user }}'
    podman_login_pass: '{{ homelab_registry_pass }}'
    podman_user: '{{ container_user }}'

# - name: Configure performance options
#  ansible.builtin.import_tasks: performance.yml

# - name: Kernel modules configuration
#   ansible.builtin.import_tasks: modules.yml

# - name: Ensure qemu-guest-agent is running and starts on boot
#   become: true
#   ansible.builtin.systemd_service:
#     state: started
#     name: qemu-guest-agent

# - name: Ensure SELinux is present and configured
#  ansible.builtin.import_tasks: selinux.yml
