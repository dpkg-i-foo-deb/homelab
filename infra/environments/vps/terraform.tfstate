{"version":4,"terraform_version":"1.9.0","serial":29,"lineage":"a084c700-35b5-9808-c037-e7dc67f373c3","outputs":{},"resources":[{"module":"module.default","mode":"managed","type":"incus_project","name":"default","provider":"provider[\"registry.opentofu.org/lxc/incus\"]","instances":[{"schema_version":0,"attributes":{"config":{"features.images":"true","features.networks":"true","features.networks.zones":"true","features.profiles":"true","features.storage.buckets":"true","features.storage.volumes":"true"},"description":"Default Incus project","force_destroy":false,"name":"default","remote":null},"sensitive_attributes":[]}]},{"module":"module.default.module.system_containers","mode":"managed","type":"incus_instance","name":"dns_vpn","provider":"provider[\"registry.opentofu.org/lxc/incus\"]","instances":[{"schema_version":0,"attributes":{"architecture":"x86_64","config":{"boot.autostart":"true","cloud-init.user-data":"#cloud-config\ngroups:\n  - admingroup: [root, sys]\n\nusers:\n  - name: dns-vpn\n    gecos: DNS Linux System Container\n    shell: /bin/bash\n    homedir: /home/dns-vpn\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    groups: users\n    lock_passwd: false\n    ssh_authorized_keys:\n      - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIK4rK1/vd8pxuk5del7oQzIg5ZGquejzZ8Eu5CwMFN41 mateoestradaramirez@outlook.com\n    passwd: $2b$05$b4A5m5MpFPG0aN5nG1Rtd.mKw1JsBrBaaSd9UvFNtBDiA6gYD/EXa\n  - name: ansible\n    gecos: Ansible Automation Account\n    shell: /bin/bash\n    homedir: /home/ansible\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    groups: users, sys\n    lock_passwd: false\n    ssh_authorized_keys:\n      - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIK4rK1/vd8pxuk5del7oQzIg5ZGquejzZ8Eu5CwMFN41 mateoestradaramirez@outlook.com\n    passwd: $y$j9T$W5URNPaERGGWpLrz40I100$9ekfQDOCpy8fFDT2Q5vv0f24etod8CaqRcOo63TImc0\nssh_pwauth: False\npackages:\n  - podman\n  - openssh-server\n  - acl\n  - curl\ntimezone: America/Bogota\nwrite_files:\n  - path: /etc/ssh/sshd_config\n    permissions: \"0600\"\n    content: |\n      Port 22\n      ListenAddress 0.0.0.0\n      PermitRootLogin no\n      PasswordAuthentication no\n      ChallengeResponseAuthentication no\n      UsePAM yes\n      X11Forwarding no\n      PrintMotd no\n      Subsystem\tsftp\t/usr/lib/openssh/sftp-server\n","limits.cpu":"1","limits.memory":"256MiB","limits.memory.swap":"true","limits.memory.swap.priority":"0","security.nesting":"true"},"description":"","device":[{"name":"data","properties":{"path":"/home","pool":"virt-main","source":"dns-vpn-data"},"type":"disk"},{"name":"eth0","properties":{"ipv4.address":"10.0.254.5","network":"trusted"},"type":"nic"},{"name":"root","properties":{"path":"/","pool":"virt-main","size":"2GiB"},"type":"disk"}],"ephemeral":false,"file":[],"image":"images:debian/trixie/cloud","ipv4_address":null,"ipv6_address":null,"mac_address":"10:66:6a:2b:f9:16","name":"dns-vpn","profiles":["default"],"project":null,"remote":null,"running":true,"source_file":null,"source_instance":null,"status":"Running","target":"","type":"container","wait_for":[]},"sensitive_attributes":[],"dependencies":["module.default.module.system_containers.incus_storage_volume.dns_vpn_data","module.networks.incus_network.trusted","module.storage_pools.incus_storage_pool.virt_main"]}]},{"module":"module.default.module.system_containers","mode":"managed","type":"incus_instance","name":"reverse_proxy","provider":"provider[\"registry.opentofu.org/lxc/incus\"]","instances":[{"schema_version":0,"attributes":{"architecture":"x86_64","config":{"boot.autostart":"true","cloud-init.user-data":"#cloud-config\ngroups:\n  - admingroup: [root, sys]\n\nusers:\n  - name: reverse-proxy\n    gecos: Reverse Proxy Linux System Container\n    shell: /bin/bash\n    homedir: /home/reverse-proxy\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    groups: users\n    lock_passwd: false\n    ssh_authorized_keys:\n      - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIK4rK1/vd8pxuk5del7oQzIg5ZGquejzZ8Eu5CwMFN41 mateoestradaramirez@outlook.com\n    passwd: $2b$05$b4A5m5MpFPG0aN5nG1Rtd.mKw1JsBrBaaSd9UvFNtBDiA6gYD/EXa\n  - name: ansible\n    gecos: Ansible Automation Account\n    shell: /bin/bash\n    homedir: /home/ansible\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    groups: users, sys\n    lock_passwd: false\n    ssh_authorized_keys:\n      - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIK4rK1/vd8pxuk5del7oQzIg5ZGquejzZ8Eu5CwMFN41 mateoestradaramirez@outlook.com\n    passwd: $y$j9T$W5URNPaERGGWpLrz40I100$9ekfQDOCpy8fFDT2Q5vv0f24etod8CaqRcOo63TImc0\nssh_pwauth: False\npackages:\n  - podman\n  - openssh-server\n  - acl\n  - curl\ntimezone: America/Bogota\nwrite_files:\n  - path: /etc/ssh/sshd_config\n    permissions: \"0600\"\n    content: |\n      Port 22\n      ListenAddress 0.0.0.0\n      PermitRootLogin no\n      PasswordAuthentication no\n      ChallengeResponseAuthentication no\n      UsePAM yes\n      X11Forwarding no\n      PrintMotd no\n      Subsystem\tsftp\t/usr/lib/openssh/sftp-server\n","limits.cpu":"2","limits.cpu.allowance":"50%","limits.memory":"700MiB","limits.memory.swap":"true","limits.memory.swap.priority":"0","security.nesting":"true"},"description":"","device":[{"name":"data","properties":{"path":"/home","pool":"virt-main","source":"reverse-proxy-data"},"type":"disk"},{"name":"eth0","properties":{"ipv4.address":"10.0.253.10","network":"dmz"},"type":"nic"},{"name":"http-tcp","properties":{"connect":"tcp:0.0.0.0:80","listen":"tcp:178.156.140.92:80","nat":"true"},"type":"proxy"},{"name":"http-udp","properties":{"connect":"udp:0.0.0.0:80","listen":"udp:178.156.140.92:80","nat":"true"},"type":"proxy"},{"name":"https-tcp","properties":{"connect":"tcp:0.0.0.0:443","listen":"tcp:178.156.140.92:443","nat":"true"},"type":"proxy"},{"name":"https-udp","properties":{"connect":"udp:0.0.0.0:443","listen":"udp:178.156.140.92:443","nat":"true"},"type":"proxy"},{"name":"root","properties":{"path":"/","pool":"virt-main","size":"2GiB"},"type":"disk"}],"ephemeral":false,"file":[],"image":"images:debian/trixie/cloud","ipv4_address":"10.0.253.10","ipv6_address":"fd42:ce93:fbe6:bcae:1266:6aff:feb2:3236","mac_address":"10:66:6a:b2:32:36","name":"reverse-proxy","profiles":["default"],"project":null,"remote":null,"running":true,"source_file":null,"source_instance":null,"status":"Running","target":"","type":"container","wait_for":[]},"sensitive_attributes":[],"dependencies":["module.default.module.system_containers.incus_storage_volume.reverse_proxy_data","module.networks.incus_network.dmz","module.storage_pools.incus_storage_pool.virt_main"]}]},{"module":"module.default.module.system_containers","mode":"managed","type":"incus_instance","name":"subnet_router","provider":"provider[\"registry.opentofu.org/lxc/incus\"]","instances":[{"schema_version":0,"attributes":{"architecture":"x86_64","config":{"boot.autostart":"true","cloud-init.user-data":"#cloud-config\ngroups:\n  - admingroup: [root, sys]\n\nusers:\n  - name: subnet-router\n    gecos: subnet-router Linux System Container\n    shell: /bin/bash\n    homedir: /home/subnet-router\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    groups: users\n    lock_passwd: false\n    ssh_authorized_keys:\n      - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIK4rK1/vd8pxuk5del7oQzIg5ZGquejzZ8Eu5CwMFN41 mateoestradaramirez@outlook.com\n    passwd: $2b$05$b4A5m5MpFPG0aN5nG1Rtd.mKw1JsBrBaaSd9UvFNtBDiA6gYD/EXa\n  - name: ansible\n    gecos: Ansible Automation Account\n    shell: /bin/bash\n    homedir: /home/ansible\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    groups: users, sys\n    lock_passwd: false\n    ssh_authorized_keys:\n      - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIK4rK1/vd8pxuk5del7oQzIg5ZGquejzZ8Eu5CwMFN41 mateoestradaramirez@outlook.com\n    passwd: $y$j9T$W5URNPaERGGWpLrz40I100$9ekfQDOCpy8fFDT2Q5vv0f24etod8CaqRcOo63TImc0\nssh_pwauth: False\npackages:\n  - podman\n  - openssh-server\n  - acl\n  - curl\ntimezone: America/Bogota\nwrite_files:\n  - path: /etc/ssh/sshd_config\n    permissions: \"0600\"\n    content: |\n      Port 22\n      ListenAddress 0.0.0.0\n      PermitRootLogin no\n      PasswordAuthentication no\n      ChallengeResponseAuthentication no\n      UsePAM yes\n      X11Forwarding no\n      PrintMotd no\n      Subsystem\tsftp\t/usr/lib/openssh/sftp-server\n","limits.cpu":"1","limits.memory":"512MiB","limits.memory.swap":"true","limits.memory.swap.priority":"0","security.nesting":"true"},"description":"","device":[{"name":"data","properties":{"path":"/home","pool":"virt-main","source":"subnet-router-data"},"type":"disk"},{"name":"eth0","properties":{"ipv4.address":"10.0.254.6","network":"trusted"},"type":"nic"},{"name":"eth1","properties":{"ipv4.address":"10.0.253.5","network":"dmz"},"type":"nic"},{"name":"root","properties":{"path":"/","pool":"virt-main","size":"2GiB"},"type":"disk"}],"ephemeral":false,"file":[],"image":"images:debian/trixie/cloud","ipv4_address":"10.0.254.6","ipv6_address":"fd42:6c18:54bc:2b4c:1266:6aff:fe20:5ef1","mac_address":"10:66:6a:20:5e:f1","name":"subnet-router","profiles":["default"],"project":null,"remote":null,"running":true,"source_file":null,"source_instance":null,"status":"Running","target":"","type":"container","wait_for":[]},"sensitive_attributes":[],"dependencies":["module.default.module.system_containers.incus_storage_volume.subnet_router_data","module.networks.incus_network.dmz","module.networks.incus_network.trusted","module.storage_pools.incus_storage_pool.virt_main"]}]},{"module":"module.default.module.system_containers","mode":"managed","type":"incus_instance","name":"vpn","provider":"provider[\"registry.opentofu.org/lxc/incus\"]","instances":[{"schema_version":0,"attributes":{"architecture":"x86_64","config":{"boot.autostart":"true","cloud-init.user-data":"#cloud-config\ngroups:\n  - admingroup: [root, sys]\n\nusers:\n  - name: vpn\n    gecos: VPN Linux System Container\n    shell: /bin/bash\n    homedir: /home/vpn\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    groups: users\n    lock_passwd: false\n    ssh_authorized_keys:\n      - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIK4rK1/vd8pxuk5del7oQzIg5ZGquejzZ8Eu5CwMFN41 mateoestradaramirez@outlook.com\n    passwd: $2b$05$b4A5m5MpFPG0aN5nG1Rtd.mKw1JsBrBaaSd9UvFNtBDiA6gYD/EXa\n  - name: ansible\n    gecos: Ansible Automation Account\n    shell: /bin/bash\n    homedir: /home/ansible\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    groups: users, sys\n    lock_passwd: false\n    ssh_authorized_keys:\n      - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIK4rK1/vd8pxuk5del7oQzIg5ZGquejzZ8Eu5CwMFN41 mateoestradaramirez@outlook.com\n    passwd: $y$j9T$W5URNPaERGGWpLrz40I100$9ekfQDOCpy8fFDT2Q5vv0f24etod8CaqRcOo63TImc0\nssh_pwauth: False\npackages:\n  - podman\n  - openssh-server\n  - acl\n  - curl\ntimezone: America/Bogota\nwrite_files:\n  - path: /etc/ssh/sshd_config\n    permissions: \"0600\"\n    content: |\n      Port 22\n      ListenAddress 0.0.0.0\n      PermitRootLogin no\n      PasswordAuthentication no\n      ChallengeResponseAuthentication no\n      UsePAM yes\n      X11Forwarding no\n      PrintMotd no\n      Subsystem\tsftp\t/usr/lib/openssh/sftp-server\n","limits.cpu":"1","limits.cpu.allowance":"10%","limits.memory":"512MiB","limits.memory.swap":"true","limits.memory.swap.priority":"0","security.nesting":"true"},"description":"","device":[{"name":"data","properties":{"path":"/home","pool":"virt-main","source":"vpn-data"},"type":"disk"},{"name":"eth0","properties":{"ipv4.address":"10.0.254.3","network":"trusted"},"type":"nic"},{"name":"root","properties":{"path":"/","pool":"virt-main","size":"2GiB"},"type":"disk"}],"ephemeral":false,"file":[],"image":"images:debian/trixie/cloud","ipv4_address":"10.0.254.3","ipv6_address":"fd42:6c18:54bc:2b4c:1266:6aff:fea6:f0c3","mac_address":"10:66:6a:a6:f0:c3","name":"vpn","profiles":["default"],"project":null,"remote":null,"running":true,"source_file":null,"source_instance":null,"status":"Running","target":"","type":"container","wait_for":[]},"sensitive_attributes":[],"dependencies":["module.default.module.system_containers.incus_storage_volume.vpn_data","module.networks.incus_network.trusted","module.storage_pools.incus_storage_pool.virt_main"]}]},{"module":"module.default.module.system_containers","mode":"managed","type":"incus_instance","name":"vpn_gateway","provider":"provider[\"registry.opentofu.org/lxc/incus\"]","instances":[{"schema_version":0,"attributes":{"architecture":"x86_64","config":{"boot.autostart":"true","cloud-init.user-data":"#cloud-config\ngroups:\n  - admingroup: [root, sys]\n\nusers:\n  - name: vpn-gateway\n    gecos: vpn-gateway Linux System Container\n    shell: /bin/bash\n    homedir: /home/vpn-gateway\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    groups: users\n    lock_passwd: false\n    ssh_authorized_keys:\n      - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIK4rK1/vd8pxuk5del7oQzIg5ZGquejzZ8Eu5CwMFN41 mateoestradaramirez@outlook.com\n    passwd: $2b$05$b4A5m5MpFPG0aN5nG1Rtd.mKw1JsBrBaaSd9UvFNtBDiA6gYD/EXa\n  - name: ansible\n    gecos: Ansible Automation Account\n    shell: /bin/bash\n    homedir: /home/ansible\n    sudo: ALL=(ALL) NOPASSWD:ALL\n    groups: users, sys\n    lock_passwd: false\n    ssh_authorized_keys:\n      - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIK4rK1/vd8pxuk5del7oQzIg5ZGquejzZ8Eu5CwMFN41 mateoestradaramirez@outlook.com\n    passwd: $y$j9T$W5URNPaERGGWpLrz40I100$9ekfQDOCpy8fFDT2Q5vv0f24etod8CaqRcOo63TImc0\nssh_pwauth: False\npackages:\n  - podman\n  - openssh-server\n  - acl\n  - curl\ntimezone: America/Bogota\nwrite_files:\n  - path: /etc/ssh/sshd_config\n    permissions: \"0600\"\n    content: |\n      Port 22\n      ListenAddress 0.0.0.0\n      PermitRootLogin no\n      PasswordAuthentication no\n      ChallengeResponseAuthentication no\n      UsePAM yes\n      X11Forwarding no\n      PrintMotd no\n      Subsystem\tsftp\t/usr/lib/openssh/sftp-server\n","limits.cpu":"1","limits.cpu.allowance":"50%","limits.memory":"256MiB","limits.memory.swap":"true","limits.memory.swap.priority":"0","security.nesting":"true"},"description":"","device":[{"name":"eth0","properties":{"ipv4.address":"10.0.252.20","network":"transit"},"type":"nic"},{"name":"eth1","properties":{"ipv4.address":"10.0.254.20","network":"trusted"},"type":"nic"},{"name":"eth2","properties":{"ipv4.address":"10.0.253.20","network":"dmz"},"type":"nic"},{"name":"root","properties":{"path":"/","pool":"virt-main","size":"2GiB"},"type":"disk"},{"name":"wg_mon","properties":{"connect":"udp:0.0.0.0:51821","listen":"udp:178.156.140.92:51821","nat":"true"},"type":"proxy"},{"name":"wg_proxy","properties":{"connect":"udp:0.0.0.0:51820","listen":"udp:178.156.140.92:51820","nat":"true"},"type":"proxy"}],"ephemeral":false,"file":[],"image":"images:debian/trixie/cloud","ipv4_address":"10.0.252.20","ipv6_address":"fd42:aae4:87e5:71b4:1266:6aff:fe6e:fc7e","mac_address":"10:66:6a:6e:fc:7e","name":"vpn-gateway","profiles":["default"],"project":null,"remote":null,"running":true,"source_file":null,"source_instance":null,"status":"Running","target":"","type":"container","wait_for":[]},"sensitive_attributes":[],"dependencies":["module.networks.incus_network.dmz","module.networks.incus_network.transit","module.networks.incus_network.trusted","module.storage_pools.incus_storage_pool.virt_main"]}]},{"module":"module.default.module.system_containers","mode":"managed","type":"incus_storage_volume","name":"dns_vpn_data","provider":"provider[\"registry.opentofu.org/lxc/incus\"]","instances":[{"schema_version":0,"attributes":{"config":{"size":"1GiB"},"content_type":"filesystem","description":"","location":"none","name":"dns-vpn-data","pool":"virt-main","project":"default","remote":null,"source_file":null,"source_volume":null,"target":"","type":"custom"},"sensitive_attributes":[],"dependencies":["module.storage_pools.incus_storage_pool.virt_main"]}]},{"module":"module.default.module.system_containers","mode":"managed","type":"incus_storage_volume","name":"reverse_proxy_data","provider":"provider[\"registry.opentofu.org/lxc/incus\"]","instances":[{"schema_version":0,"attributes":{"config":{"size":"1GiB"},"content_type":"filesystem","description":"","location":"none","name":"reverse-proxy-data","pool":"virt-main","project":"default","remote":null,"source_file":null,"source_volume":null,"target":"","type":"custom"},"sensitive_attributes":[],"dependencies":["module.storage_pools.incus_storage_pool.virt_main"]}]},{"module":"module.default.module.system_containers","mode":"managed","type":"incus_storage_volume","name":"subnet_router_data","provider":"provider[\"registry.opentofu.org/lxc/incus\"]","instances":[{"schema_version":0,"attributes":{"config":{"size":"1GiB"},"content_type":"filesystem","description":"","location":"none","name":"subnet-router-data","pool":"virt-main","project":"default","remote":null,"source_file":null,"source_volume":null,"target":"","type":"custom"},"sensitive_attributes":[],"dependencies":["module.storage_pools.incus_storage_pool.virt_main"]}]},{"module":"module.default.module.system_containers","mode":"managed","type":"incus_storage_volume","name":"vpn_data","provider":"provider[\"registry.opentofu.org/lxc/incus\"]","instances":[{"schema_version":0,"attributes":{"config":{"size":"1GiB"},"content_type":"filesystem","description":"","location":"none","name":"vpn-data","pool":"virt-main","project":"default","remote":null,"source_file":null,"source_volume":null,"target":"","type":"custom"},"sensitive_attributes":[],"dependencies":["module.storage_pools.incus_storage_pool.virt_main"]}]},{"module":"module.networks","mode":"managed","type":"incus_network","name":"dmz","provider":"provider[\"registry.opentofu.org/lxc/incus\"]","instances":[{"schema_version":0,"attributes":{"config":{"ipv4.address":"10.0.253.1/24","ipv4.dhcp.routes":"0.0.0.0/0,10.0.253.1,10.0.1.0/24,10.0.253.20,10.0.5.0/24,10.0.253.20","ipv4.nat":"true"},"description":"","managed":true,"name":"dmz","project":null,"remote":null,"target":null,"type":"bridge"},"sensitive_attributes":[]}]},{"module":"module.networks","mode":"managed","type":"incus_network","name":"transit","provider":"provider[\"registry.opentofu.org/lxc/incus\"]","instances":[{"schema_version":0,"attributes":{"config":{"ipv4.address":"10.0.252.1/24","ipv4.dhcp.routes":"0.0.0.0/0,10.0.252.1","ipv4.nat":"true"},"description":"","managed":true,"name":"transit","project":null,"remote":null,"target":null,"type":"bridge"},"sensitive_attributes":[]}]},{"module":"module.networks","mode":"managed","type":"incus_network","name":"trusted","provider":"provider[\"registry.opentofu.org/lxc/incus\"]","instances":[{"schema_version":0,"attributes":{"config":{"ipv4.address":"10.0.254.1/24","ipv4.nat":"true"},"description":"","managed":true,"name":"trusted","project":null,"remote":null,"target":null,"type":"bridge"},"sensitive_attributes":[]}]},{"module":"module.storage_pools","mode":"managed","type":"incus_storage_pool","name":"virt_main","provider":"provider[\"registry.opentofu.org/lxc/incus\"]","instances":[{"schema_version":0,"attributes":{"config":{},"description":"","driver":"dir","name":"virt-main","project":null,"remote":null,"target":null},"sensitive_attributes":[]}]}],"check_results":null}
